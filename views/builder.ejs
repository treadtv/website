<head>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/cupertino/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.css" />
    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid-theme.min.css" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.js"></script>
</head>
<body>
    <h1>Rows Reordering Scenario</h1>
    
    <div id="jsGrid"></div>


<script>
    var CopyField = function(config) {
        jsGrid.Field.call(this, config);
    };
    
    CopyField.prototype = new jsGrid.Field({
        css: "copy-field",            // redefine general property 'css'
        align: "center",              // redefine general property 'align'
    
        itemTemplate: function(value, item) {
            return $("<button>")
                    .text("Copy")
                    .on("click", function(e) {
                        var copy = $.extend({}, item, {Name: item.Name});
                        $("#jsGrid").jsGrid("insertItem",copy);
                        e.stopPropagation();
                    });
        }
    });
    jsGrid.fields.copycontrol = CopyField;
    
var clients = [
        { "Workout Name": "Otto Clay", "Reps": "December, 17 2014" },
        { "Workout Name": "Connor Johnston", "Reps": "March, 5 2012" },
        { "Workout Name": "Lacey Hess", "Reps": "August, 2 2000" }
    ];
 

    $("#jsGrid").jsGrid({
        height: "70%",
        width: "100%",
        autoload: true,
 
        rowClass: function(item, itemIndex) {
            return "client-" + itemIndex;
        },
        data:clients,

        fields: [
            { name: "Workout Name", type: "text", width: 150 },
            { name: "Reps", type: "number", width: 50 },
            { name: "Time in Seconds", type: "number", width: 50 },
            { name: "Video", type: "checkbox", title: "Is Video", sorting: false }
        ],
 
        onRefreshed: function() {
            var $gridData = $("#jsGrid .jsgrid-grid-body tbody");
 
            $gridData.sortable({
                update: function(e, ui) {
                    // array of indexes
                    var clientIndexRegExp = /\s*client-(\d+)\s*/;
                    var indexes = $.map($gridData.sortable("toArray", { attribute: "class" }), function(classes) {
                        return clientIndexRegExp.exec(classes)[1];
                    });
                    alert("Reordered indexes: " + indexes.join(", "));
 
                    // arrays of items
                    var items = $.map($gridData.find("tr"), function(row) {
                        return $(row).data("JSGridItem");
                    });
                    console && console.log("Reordered items", items);
                }
            });
        }
    });
 

</script>

</body>
